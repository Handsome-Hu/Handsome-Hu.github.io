<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类文件结构详解下篇 | HuKai&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.f94c6d62.css" as="style"><link rel="preload" href="/assets/js/app.962f4083.js" as="script"><link rel="preload" href="/assets/js/2.4e5b50fd.js" as="script"><link rel="preload" href="/assets/js/17.953b303f.js" as="script"><link rel="prefetch" href="/assets/js/10.cedb8fc8.js"><link rel="prefetch" href="/assets/js/100.97c6df9b.js"><link rel="prefetch" href="/assets/js/101.cdf13753.js"><link rel="prefetch" href="/assets/js/102.311589dd.js"><link rel="prefetch" href="/assets/js/103.59ad4c99.js"><link rel="prefetch" href="/assets/js/104.10f807b9.js"><link rel="prefetch" href="/assets/js/105.a8ba4f55.js"><link rel="prefetch" href="/assets/js/106.25048cf2.js"><link rel="prefetch" href="/assets/js/107.94fe0209.js"><link rel="prefetch" href="/assets/js/108.c7e64cc1.js"><link rel="prefetch" href="/assets/js/109.102f9bcb.js"><link rel="prefetch" href="/assets/js/11.81a198ff.js"><link rel="prefetch" href="/assets/js/110.22e11393.js"><link rel="prefetch" href="/assets/js/111.b06f950a.js"><link rel="prefetch" href="/assets/js/112.9b539789.js"><link rel="prefetch" href="/assets/js/113.ce4504b0.js"><link rel="prefetch" href="/assets/js/114.025aafb7.js"><link rel="prefetch" href="/assets/js/115.98e619d2.js"><link rel="prefetch" href="/assets/js/116.fca06441.js"><link rel="prefetch" href="/assets/js/117.766d60f2.js"><link rel="prefetch" href="/assets/js/118.2e8a9449.js"><link rel="prefetch" href="/assets/js/119.cf3e9467.js"><link rel="prefetch" href="/assets/js/12.85c275e2.js"><link rel="prefetch" href="/assets/js/120.e439bf2a.js"><link rel="prefetch" href="/assets/js/121.22b6a08e.js"><link rel="prefetch" href="/assets/js/122.a99cad03.js"><link rel="prefetch" href="/assets/js/123.99bf9f6f.js"><link rel="prefetch" href="/assets/js/124.b31f9bcb.js"><link rel="prefetch" href="/assets/js/125.57ecd60e.js"><link rel="prefetch" href="/assets/js/126.a62b933c.js"><link rel="prefetch" href="/assets/js/127.b94907c1.js"><link rel="prefetch" href="/assets/js/128.a5eeae7e.js"><link rel="prefetch" href="/assets/js/129.11242a1a.js"><link rel="prefetch" href="/assets/js/13.24108bd1.js"><link rel="prefetch" href="/assets/js/130.ca6614b0.js"><link rel="prefetch" href="/assets/js/131.5b446cb1.js"><link rel="prefetch" href="/assets/js/132.fe0e4b25.js"><link rel="prefetch" href="/assets/js/133.7da2a9ca.js"><link rel="prefetch" href="/assets/js/134.8847706e.js"><link rel="prefetch" href="/assets/js/135.1aaa4a7e.js"><link rel="prefetch" href="/assets/js/136.ce308f8a.js"><link rel="prefetch" href="/assets/js/137.8a6c731a.js"><link rel="prefetch" href="/assets/js/138.92d68198.js"><link rel="prefetch" href="/assets/js/139.085aab9c.js"><link rel="prefetch" href="/assets/js/14.b2716ad2.js"><link rel="prefetch" href="/assets/js/140.4750d6be.js"><link rel="prefetch" href="/assets/js/141.2caa68a9.js"><link rel="prefetch" href="/assets/js/142.27f6ccd4.js"><link rel="prefetch" href="/assets/js/143.09d6ea5d.js"><link rel="prefetch" href="/assets/js/144.587d2502.js"><link rel="prefetch" href="/assets/js/145.fc9fe5ac.js"><link rel="prefetch" href="/assets/js/146.93b40906.js"><link rel="prefetch" href="/assets/js/147.36c1074b.js"><link rel="prefetch" href="/assets/js/148.b4621d93.js"><link rel="prefetch" href="/assets/js/149.f75ff447.js"><link rel="prefetch" href="/assets/js/15.cd1ab273.js"><link rel="prefetch" href="/assets/js/150.7996bd64.js"><link rel="prefetch" href="/assets/js/16.6edcde9f.js"><link rel="prefetch" href="/assets/js/18.92a2cf65.js"><link rel="prefetch" href="/assets/js/19.818c2c75.js"><link rel="prefetch" href="/assets/js/20.1e164a88.js"><link rel="prefetch" href="/assets/js/21.8c809005.js"><link rel="prefetch" href="/assets/js/22.48dd58c8.js"><link rel="prefetch" href="/assets/js/23.e4780595.js"><link rel="prefetch" href="/assets/js/24.feba84c7.js"><link rel="prefetch" href="/assets/js/25.a3727c22.js"><link rel="prefetch" href="/assets/js/26.9e4abad8.js"><link rel="prefetch" href="/assets/js/27.32753548.js"><link rel="prefetch" href="/assets/js/28.6f662207.js"><link rel="prefetch" href="/assets/js/29.1fadf0a2.js"><link rel="prefetch" href="/assets/js/3.1cddb6cf.js"><link rel="prefetch" href="/assets/js/30.e189d849.js"><link rel="prefetch" href="/assets/js/31.be4b2096.js"><link rel="prefetch" href="/assets/js/32.7032d501.js"><link rel="prefetch" href="/assets/js/33.4ea241e6.js"><link rel="prefetch" href="/assets/js/34.23f593cf.js"><link rel="prefetch" href="/assets/js/35.d1f6b678.js"><link rel="prefetch" href="/assets/js/36.a2149a58.js"><link rel="prefetch" href="/assets/js/37.235e451a.js"><link rel="prefetch" href="/assets/js/38.e4186d58.js"><link rel="prefetch" href="/assets/js/39.876bd327.js"><link rel="prefetch" href="/assets/js/4.a6d1b1a4.js"><link rel="prefetch" href="/assets/js/40.2c054421.js"><link rel="prefetch" href="/assets/js/41.cf09da3d.js"><link rel="prefetch" href="/assets/js/42.2620c1e9.js"><link rel="prefetch" href="/assets/js/43.56d0f422.js"><link rel="prefetch" href="/assets/js/44.7ee49c2a.js"><link rel="prefetch" href="/assets/js/45.40ffb341.js"><link rel="prefetch" href="/assets/js/46.df7810e6.js"><link rel="prefetch" href="/assets/js/47.92e3fcca.js"><link rel="prefetch" href="/assets/js/48.a99456a1.js"><link rel="prefetch" href="/assets/js/49.78cdc8b4.js"><link rel="prefetch" href="/assets/js/5.f449407f.js"><link rel="prefetch" href="/assets/js/50.79e74546.js"><link rel="prefetch" href="/assets/js/51.93e142d9.js"><link rel="prefetch" href="/assets/js/52.f496fa4d.js"><link rel="prefetch" href="/assets/js/53.e5a2bf10.js"><link rel="prefetch" href="/assets/js/54.a5afe4d5.js"><link rel="prefetch" href="/assets/js/55.88b3bd42.js"><link rel="prefetch" href="/assets/js/56.dc2826fc.js"><link rel="prefetch" href="/assets/js/57.e585041a.js"><link rel="prefetch" href="/assets/js/58.6be6f63d.js"><link rel="prefetch" href="/assets/js/59.fb3e5c6f.js"><link rel="prefetch" href="/assets/js/6.55b55826.js"><link rel="prefetch" href="/assets/js/60.3c14ebaa.js"><link rel="prefetch" href="/assets/js/61.5b7e8a7e.js"><link rel="prefetch" href="/assets/js/62.8c29cdd5.js"><link rel="prefetch" href="/assets/js/63.a547abe4.js"><link rel="prefetch" href="/assets/js/64.a813c296.js"><link rel="prefetch" href="/assets/js/65.99e33e03.js"><link rel="prefetch" href="/assets/js/66.1034045d.js"><link rel="prefetch" href="/assets/js/67.7036803a.js"><link rel="prefetch" href="/assets/js/68.2211cb75.js"><link rel="prefetch" href="/assets/js/69.26977602.js"><link rel="prefetch" href="/assets/js/7.10ec6061.js"><link rel="prefetch" href="/assets/js/70.d3f0adbc.js"><link rel="prefetch" href="/assets/js/71.e8cc5782.js"><link rel="prefetch" href="/assets/js/72.1da9a48c.js"><link rel="prefetch" href="/assets/js/73.0da04604.js"><link rel="prefetch" href="/assets/js/74.57e73494.js"><link rel="prefetch" href="/assets/js/75.fa562773.js"><link rel="prefetch" href="/assets/js/76.501f08f9.js"><link rel="prefetch" href="/assets/js/77.367e2d29.js"><link rel="prefetch" href="/assets/js/78.53ab35b3.js"><link rel="prefetch" href="/assets/js/79.e140e174.js"><link rel="prefetch" href="/assets/js/8.ed059f7c.js"><link rel="prefetch" href="/assets/js/80.e4c4b033.js"><link rel="prefetch" href="/assets/js/81.f00a8ab8.js"><link rel="prefetch" href="/assets/js/82.9607b852.js"><link rel="prefetch" href="/assets/js/83.6bae0f8b.js"><link rel="prefetch" href="/assets/js/84.e9c834a9.js"><link rel="prefetch" href="/assets/js/85.c20efa9f.js"><link rel="prefetch" href="/assets/js/86.48849ff2.js"><link rel="prefetch" href="/assets/js/87.56ff677e.js"><link rel="prefetch" href="/assets/js/88.73836b7b.js"><link rel="prefetch" href="/assets/js/89.2992cc5f.js"><link rel="prefetch" href="/assets/js/9.6b061e1d.js"><link rel="prefetch" href="/assets/js/90.f40233bc.js"><link rel="prefetch" href="/assets/js/91.bd81e1a2.js"><link rel="prefetch" href="/assets/js/92.b31f8ffe.js"><link rel="prefetch" href="/assets/js/93.da43c347.js"><link rel="prefetch" href="/assets/js/94.416ae600.js"><link rel="prefetch" href="/assets/js/95.0c95fd03.js"><link rel="prefetch" href="/assets/js/96.f1769312.js"><link rel="prefetch" href="/assets/js/97.b6bcc2e4.js"><link rel="prefetch" href="/assets/js/98.630cb1dc.js"><link rel="prefetch" href="/assets/js/99.3cc93477.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f94c6d62.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="HuKai's Blog" class="logo"> <span class="site-name can-hide">HuKai's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java核心技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java并发编程</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java新特性</a></li></ul></li><li class="dropdown-item"><h4>Spring生态</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Spring5</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>开源框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cc6386/" class="nav-link">MyBatis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基本功" class="dropdown-title"><a href="/base/" class="link-title">基本功</a> <span class="title" style="display:none;">基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7f049b/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/7f049b/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/b19901/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/b19901/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/db/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b19901/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/pages/04a594/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f322db/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/948036/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面样式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/948036/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/56c2f3/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0796ba76b4b55368/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/pages/f344d070a1031ef7/" class="nav-link">ECMAScript6教程</a></li><li class="dropdown-subitem"><a href="/pages/822b08/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>前端框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c660da/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/389bf1/" class="nav-link">Webpack</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><a href="/distributed/" class="link-title">分布式</a> <span class="title" style="display:none;">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/87065a/" class="nav-link">NIO</a></li><li class="dropdown-item"><!----> <a href="/pages/a300fa/" class="nav-link">Netty</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><a href="/design/" class="link-title">系统设计</a> <span class="title" style="display:none;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8f8d52/" class="nav-link">RabbitMQ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/180676/" class="nav-link">GitHub技巧</a></li><li class="dropdown-subitem"><a href="/pages/180676/" class="nav-link">博客搭建</a></li><li class="dropdown-subitem"><a href="/pages/f3cefb/" class="nav-link">技术笔记</a></li></ul></li><li class="dropdown-item"><h4>优质文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/62dd4b/" class="nav-link">小技巧</a></li><li class="dropdown-subitem"><a href="/pages/8ef442/" class="nav-link">解决方案</a></li></ul></li></ul></div></div> <a href="https://github.com/handsome-hu/handsome-hu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/my/headPic.jpg"> <div class="blogger-info"><h3>HuKai</h3> <span>梦想成为全栈的保安</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java核心技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java并发编程</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">JVM</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Java新特性</a></li></ul></li><li class="dropdown-item"><h4>Spring生态</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">Spring5</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/pages/7f049b/" class="nav-link">SpringBoot</a></li></ul></li><li class="dropdown-item"><h4>开源框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/cc6386/" class="nav-link">MyBatis</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基本功" class="dropdown-title"><a href="/base/" class="link-title">基本功</a> <span class="title" style="display:none;">基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7f049b/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/7f049b/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/b19901/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/b19901/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/db/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b19901/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/pages/04a594/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f322db/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/948036/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面样式</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/948036/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/56c2f3/" class="nav-link">CSS</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0796ba76b4b55368/" class="nav-link">JavaScript基础</a></li><li class="dropdown-subitem"><a href="/pages/f344d070a1031ef7/" class="nav-link">ECMAScript6教程</a></li><li class="dropdown-subitem"><a href="/pages/822b08/" class="nav-link">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>前端框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c660da/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/389bf1/" class="nav-link">Webpack</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><a href="/distributed/" class="link-title">分布式</a> <span class="title" style="display:none;">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/87065a/" class="nav-link">NIO</a></li><li class="dropdown-item"><!----> <a href="/pages/a300fa/" class="nav-link">Netty</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><a href="/design/" class="link-title">系统设计</a> <span class="title" style="display:none;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8f8d52/" class="nav-link">RabbitMQ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>技术文档</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/180676/" class="nav-link">GitHub技巧</a></li><li class="dropdown-subitem"><a href="/pages/180676/" class="nav-link">博客搭建</a></li><li class="dropdown-subitem"><a href="/pages/f3cefb/" class="nav-link">技术笔记</a></li></ul></li><li class="dropdown-item"><h4>优质文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/62dd4b/" class="nav-link">小技巧</a></li><li class="dropdown-subitem"><a href="/pages/8ef442/" class="nav-link">解决方案</a></li></ul></li></ul></div></div> <a href="https://github.com/handsome-hu/handsome-hu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9626c2/" class="sidebar-link">初识JVM</a></li><li><a href="/pages/180e36/" class="sidebar-link">类文件结构详解上篇</a></li><li><a href="/pages/657cd3/" aria-current="page" class="active sidebar-link">类文件结构详解下篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#属性表结构" class="sidebar-link">属性表结构</a></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#code属性" class="sidebar-link">Code属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#属性详解" class="sidebar-link">属性详解</a></li><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#实例解析" class="sidebar-link">实例解析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#exceptions属性" class="sidebar-link">Exceptions属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#属性详解-2" class="sidebar-link">属性详解</a></li><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#实例解析-2" class="sidebar-link">实例解析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#linenumbertable属性" class="sidebar-link">LineNumberTable属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#属性详解-3" class="sidebar-link">属性详解</a></li><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#实例分析" class="sidebar-link">实例分析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#localvariabletable属性" class="sidebar-link">LocalVariableTable属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#属性详解-4" class="sidebar-link">属性详解</a></li><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#实例分析-2" class="sidebar-link">实例分析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#sourcefile属性" class="sidebar-link">SourceFile属性</a></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#constantvalue属性" class="sidebar-link">ConstantValue属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#属性详解-5" class="sidebar-link">属性详解</a></li><li class="sidebar-sub-header level3"><a href="/pages/657cd3/#实例分析-3" class="sidebar-link">实例分析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#innerclasses属性" class="sidebar-link">InnerClasses属性</a></li><li class="sidebar-sub-header level2"><a href="/pages/657cd3/#deprecated及synthetic属性" class="sidebar-link">Deprecated及Synthetic属性</a></li></ul></li><li><a href="/pages/95238d/" class="sidebar-link">虚拟机类加载机制</a></li><li><a href="/pages/0844cd/" class="sidebar-link">JVM内存结构</a></li><li><a href="/pages/ac6681/" class="sidebar-link">JVM对象模型</a></li><li><a href="/pages/9c45cb/" class="sidebar-link">GC基础</a></li><li><a href="/pages/5695e6/" class="sidebar-link">GC算法与收集器</a></li><li><a href="/pages/7872f4/" class="sidebar-link">GC日志详解</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java新特性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring5</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MyBatis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/java/#Java" data-v-0c557b5e>Java</a></li><li data-v-0c557b5e><a href="/java/#JVM" data-v-0c557b5e>JVM</a></li></ul> <div class="info" data-v-0c557b5e><div title="作者" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/handsome-hu" target="_blank" title="作者" class="beLink" data-v-0c557b5e>HuKai</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-02-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">类文件结构详解下篇<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>在<code>类文件结构详解上篇</code>一文中，我们介绍了class文件的构成，整个class文件一共包含3部分共16个属性：</p> <ul><li>3个描述文件属性的数据项：魔数和主次版本号</li> <li>11个描述类属性的数据项：类、字段、方法等信息</li> <li>2个描述代码属性的数据项：属性表，描述方法体内的具体内容</li></ul> <p>其中文件属性和类属性在上一篇中已经有过介绍，本文将主要介绍一下属性表。</p> <p>后续的讲解我们会使用下面的类作为样例，附上代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>hukai<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bytecode</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>beans<span class="token punctuation">.</span></span><span class="token class-name">Transient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">ParseException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 属性测试
 *
 * @author hukai
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AttributeDemo</span> <span class="token punctuation">{</span>

    <span class="token comment">// 被final修饰并且直接赋值,数据类型为基本类型或字符串类型,生成ConstantValue属性进行初始化</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> anInt <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token comment">// 被final修饰并且直接赋值,数据类型不为基础类型，在实例构造器`init`方法里初始化</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Date</span> anDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在`clinit`方法（静态代码块）里初始化</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> bnInt <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Deprecated</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Date</span> bnDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Transient</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">convertToString</span><span class="token punctuation">(</span><span class="token class-name">String</span> dateString<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">,</span> <span class="token class-name">ParseException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dateString <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;字符串为空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Date</span> date <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NullPointerException</span> <span class="token operator">|</span> <span class="token class-name">ArrayIndexOutOfBoundsException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;出现异常&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Sms</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> phone<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>phone <span class="token operator">=</span> phone<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="属性表结构"><a href="#属性表结构" class="header-anchor">#</a> 属性表结构</h2> <p>属性表(attribute_info)在前面的讲解之中已经出现过数次，在Class文件、字段表、方法表都可以携带自己的属性表集合，以用于推述某些场景专有的信息。其结构如下图：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513172928.png" alt=""></p> <p>对于每个属性(attribute_info)，它的名称需要从常量池中引用一个CONSTANT_Utf8_info类型的常量来表示，而属性值的结构则是完全自定义的，只需要通过一个u4的长度属性去说明属性值所占的位数即可。一个符合规则的属性表应该满足下表中所定义的结构：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u1</td> <td>info</td> <td>attribute_length</td></tr></tbody></table> <p>为了能正确解析Class文件，Java虚拟机规范中预定义了21项虛拟机实现应当能识别的属性，下文中将对其中一些属性中的关键常用的部分进行讲解。</p> <table><thead><tr><th>属性名称</th> <th>使用位置</th> <th>含义</th></tr></thead> <tbody><tr><td>Code</td> <td>方法表</td> <td>Java代码编译成的字节码指令</td></tr> <tr><td>ConstantValue</td> <td>字段表</td> <td>final关键字定义的常量值</td></tr> <tr><td>Deprecated</td> <td>类文件、字段表、方法表</td> <td>被声明为deprecated的方法和字段</td></tr> <tr><td>Exceptions</td> <td>方法表</td> <td>方法抛出的异常</td></tr> <tr><td>InnerClasses</td> <td>类文件</td> <td>内部类列表</td></tr> <tr><td>LineNumberTale</td> <td>Code属性</td> <td>Java源码的行号与字节码指令的对应关系</td></tr> <tr><td>LocalVariableTable</td> <td>Code属性</td> <td>方法的局部变量描述</td></tr> <tr><td>SourceFile</td> <td>类文件</td> <td>源文件名称</td></tr> <tr><td>Synthetic</td> <td>类文件、方法表、字段表</td> <td>标识方法或字段是由编译器自动生成的</td></tr></tbody></table> <h2 id="code属性"><a href="#code属性" class="header-anchor">#</a> Code属性</h2> <h3 id="属性详解"><a href="#属性详解" class="header-anchor">#</a> 属性详解</h3> <p>Java程序方法体中的代码经过Javac编译器处理后，最终变为字节码指令存储在Code属性内。Code属性出现在方法表的属性集合之中，但并非所有的方法表都必须存在这个屬性，譬如接口或者抽象类中的方法就不存在Code属性，如果方法表有Code属性存在，那么它的结构如下所示：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>max_stack</td> <td>1</td></tr> <tr><td>u2</td> <td>max_locals</td> <td>1</td></tr> <tr><td>u4</td> <td>code_length</td> <td>1</td></tr> <tr><td>u1</td> <td>code</td> <td>code_length</td></tr> <tr><td>u2</td> <td>exception_table_length</td> <td>1</td></tr> <tr><td>exception_info</td> <td>exception_table</td> <td>exception_table_length</td></tr> <tr><td>u2</td> <td>attributes_count</td> <td>1</td></tr> <tr><td>attribute_info</td> <td>attributes</td> <td>attributes_count</td></tr></tbody></table> <p>下面对这些数据项逐一讲解：</p> <ul><li>attribute_name_index是一个指向常量池中某一个CONSTANT_Utf8_info常量的索引，取值固定为Code。代表了该属性的属性名称</li> <li>attribute_length指示了属性值的长度，由于属性名称索引与属性长度一共为6字节，所以属性值的长度固定为整个属性表长度减去6个字节</li> <li>max_stack表示操作数栈的最大深度，jvm运行时会根据这个值来分配栈帧中的操作数栈深度</li> <li>max_locals表示局部变量表所需要的存储空间，单位为slot。并不是所有局部变量占用的slot之和，当一个局部变量的生命周期结束后，其所占用的slot将分配给其它依然存活的局部变量使用，按此方式计算出方法运行时局部变量表所需的存储空间</li> <li><strong>code_length和code用来存储Java源程序编译后生成的字节码指令</strong>。code_length代表字节码长度，code是用于存储字节码指令的一系列字节流。那么每个指令就是一个u1类型的单字节，当虚拟机读取到code中的一个字节码时，就可以对应找出这个宇节码代表的是什么指令.并且可以知道这条指令后面是否需要跟随参数，以及参数该如何理解</li> <li>exception_table_length表示异常表占用的字节数</li> <li>exception_table表示具体的异常表</li> <li>Code属性本身还有自己的一些属性表，包括LineNumberTable、LocalVariableTable和StackMapTable，这些属性不是必须的，如果有的话，会在attributes_count和attributes中体现出来</li></ul> <p><em>tips：Slot，虚拟机为局部变量分配内存所使用的最小单位，长度不超过32位的数据类型占用1个Slot，64位的数据类型（long和double）占用2个Slot</em></p> <h3 id="实例解析"><a href="#实例解析" class="header-anchor">#</a> 实例解析</h3> <p>使用javap -v命令解析字节码内容，查看convertToString方法的解析结果如下：
<img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173042.png" alt=""></p> <p>stack=3, locals=4分别代表了max_stack=3和max_locals=4，即操作数栈的最大深度为3，局部变量表所需要的存储空间为4 slot。</p> <p>arg_size代表参数个数。需要注意的是如果方法不是static修饰的，会自带一个this参数，此时arg_size=入参个数+1。<strong>虚拟机在解析class文件中的方法时，会判断参数数量args_size是否大于MAX_ARGS_SIZE，如果大于则就会报错了。MAX_ARGS_SIZE为255</strong>。</p> <p>后续为编译出的字节码指令，在此不做详解。</p> <p>最后为exception_table属性，很明显他对应着try catch这种东西，如果你的代码里没有try catch代码块，是不会生成exception_table的，它的结构如下：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>start_pc</td> <td>1</td></tr> <tr><td>u2</td> <td>end_pc</td> <td>1</td></tr> <tr><td>u2</td> <td>handler_pc</td> <td>1</td></tr> <tr><td>u2</td> <td>catch_type</td> <td>1</td></tr></tbody></table> <p>start_pc和end_pc划分了try{}，其对应字节码指令的行号，而catch_type代表了catch（exception）里面的那个参数exception，如果抓到异常就转到handler_pc处理。</p> <h2 id="exceptions属性"><a href="#exceptions属性" class="header-anchor">#</a> Exceptions属性</h2> <h3 id="属性详解-2"><a href="#属性详解-2" class="header-anchor">#</a> 属性详解</h3> <p>这里的Exceptions属性是在方法表中与Code属性平级的一项属性，不是前面讲的异常表。Exceptions属性的作用是列举出方法中可能抛出的受査异常，也就是方法描述时在throws关键字后面列举的异常。结构如下：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>number_of_exceptions</td> <td>1</td></tr> <tr><td>u2</td> <td>exception_index_table</td> <td>number_of_exceptions</td></tr></tbody></table> <ul><li>number_of_exceptions表示可能抛出number_of_exceptions种
受查异常</li> <li>exception_index_table为异常索引集合，一组u2类型
exception_index的集合，每一个exception_index为一个指向常量池中一CONSTANT_Class_info型常量的索引，代表该受查异常的类型</li></ul> <h3 id="实例解析-2"><a href="#实例解析-2" class="header-anchor">#</a> 实例解析</h3> <p>使用IDEA的jclasslib插件查看字节码信息，可以看到convertToString方法的Exceptions属性分析结果如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173101.png" alt=""></p> <p>可以看到声明了RuntimeException和ParseException两个异常，皆为throws关键字后面列举的异常。</p> <h2 id="linenumbertable属性"><a href="#linenumbertable属性" class="header-anchor">#</a> LineNumberTable属性</h2> <h3 id="属性详解-3"><a href="#属性详解-3" class="header-anchor">#</a> 属性详解</h3> <p><strong>LineNumberTable属性用于描述Java源码行号与字节码行号之间的对应关系</strong>，它并不是运行时必需的属性，但默认会生成到Class文件之中，可以在Javac中分别使用-g:none或-g:lines选项来取消或要求生成这项信息。</p> <p><strong>如果选择不生成LineNumberTable属性，对程序运行产生的最主要的影响就是当抛出异常时，堆栈中将不会显示出错的行号，并且在调试程序的时候，也无法按照源码行来设置断点</strong>。属性结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>line_number_table_length</td> <td>1</td></tr> <tr><td>line_number_info</td> <td>line_number_table</td> <td>line_number_table_length</td></tr></tbody></table> <p>line_number_table是一个数量为line_number_table_length、类型为line_number_info的集合，line_number_info结构如下：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th> <th>含义</th></tr></thead> <tbody><tr><td>u2</td> <td>start_pc</td> <td>1</td> <td>字节码偏移量</td></tr> <tr><td>u2</td> <td>line_number</td> <td>1</td> <td>java源文件行号</td></tr></tbody></table> <h3 id="实例分析"><a href="#实例分析" class="header-anchor">#</a> 实例分析</h3> <p>使用jclasslib插件查看convertToString方法的Code属性下的LineNumberTable属性如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173116.png" alt=""></p> <h2 id="localvariabletable属性"><a href="#localvariabletable属性" class="header-anchor">#</a> LocalVariableTable属性</h2> <h3 id="属性详解-4"><a href="#属性详解-4" class="header-anchor">#</a> 属性详解</h3> <p><strong>LocalVariableTable属性用于描述栈帧中局部变量表中的变量与Java源码中定义的变量之间的关系</strong>，它也不是运行时必需的属性，但默认会生成到Class文件之中，可以在Javac中分别使用-g:none或-g:vars选项来取消或要求生成这项信息。</p> <p>如果没有生成这项属性，最大的影响就是当其他人引用这个方法时，所有的参数名称都将会丢失，IDE将会使用诸如arg0、argl之类的占位符代替原有的参数名，这对程序运行没有影响，但是会对代码编写带来较大不便，而且在调试期间无法根据参数名称从上下文中获得参数值。其结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>local_variable_table_length</td> <td>1</td></tr> <tr><td>local_variable_info</td> <td>local_variable_table</td> <td>local_variable_table_length</td></tr></tbody></table> <p>其中local_variable_info项目代表了一个栈帧与源码中的局部变量的关联，其结构如下：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th> <th>含义</th></tr></thead> <tbody><tr><td>u2</td> <td>start_pc</td> <td>1</td> <td>变量生命周期开始时的字节码偏移量</td></tr> <tr><td>u2</td> <td>length</td> <td>1</td> <td>变量作用范围覆盖的字节数</td></tr> <tr><td>u2</td> <td>name_index</td> <td>1</td> <td>索引值，指向变量名称</td></tr> <tr><td>u2</td> <td>descriptor_index</td> <td>1</td> <td>索引值，指向变量描述符</td></tr> <tr><td>u2</td> <td>index</td> <td>1</td> <td>变量在栈帧中slot的位置</td></tr></tbody></table> <h3 id="实例分析-2"><a href="#实例分析-2" class="header-anchor">#</a> 实例分析</h3> <p>查看convertToString方法的Code属性下的LocalVariableTable属性如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173132.png" alt=""></p> <p>可以看到虽然我们方法体中没有用到this关键字，但是LocalVariableTable中还是有this这个局部变量，其作用范围是整个方法体。当然，静态方法是不会有this这个局部变量的。</p> <h2 id="sourcefile属性"><a href="#sourcefile属性" class="header-anchor">#</a> SourceFile属性</h2> <p>SourceFile属性用于记录生成这个class文件的源码文件名称。这个属性也是可选的，可以分别使用Javac的-g:none或-g:source选项来关闭或要求生成这项信息。</p> <p>对大多数文件，类名和文件名是一致的，少数特殊类除外（如：内部类），如果不生成这项属性，抛出异常时，堆找中将不会显示出错代码所属的文件名。这是一个定长的属性，结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>sourcefile_index</td> <td>1</td></tr></tbody></table> <p>sourcefile_index是指向常量池中一CONSTANT_Utf8_info类型常量的索引，常量的值为源码文件的文件名。实例如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173146.png" alt=""></p> <h2 id="constantvalue属性"><a href="#constantvalue属性" class="header-anchor">#</a> ConstantValue属性</h2> <h3 id="属性详解-5"><a href="#属性详解-5" class="header-anchor">#</a> 属性详解</h3> <p>ConstantValue属性的作用是通知虚拟机自动为常量赋值。我个人对这个属性的理解是：当某个类变量被final修饰并且直接赋值，并且该变量的数据类型为基本类型或字符串类型，就生成ConstantValue属性进行初始化。如果变量不是基本类型或字符串类型，则在实例构造器<code>init</code>方法里初始化，若变量还被static修饰，则在静态初始化方法<code>clinit</code>里初始化。属性结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>constantvalue_index</td> <td>1</td></tr></tbody></table> <p>constantvalue_index数据项代表了常量池中一个字面量常量的引用，它指向的应该是一个基本数据类型常量或者CONSTANT_String_info常量中的一种。</p> <h3 id="实例分析-3"><a href="#实例分析-3" class="header-anchor">#</a> 实例分析</h3> <p>AttributeDemo类中定义了四个字段，查看字节码分析结果如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173206.png" alt=""></p> <p>可以看到只有两个字段(anInt、bnInt)生成了ConstantValue属性，它们的共同特点是都被final修饰且为基本类型。</p> <h2 id="innerclasses属性"><a href="#innerclasses属性" class="header-anchor">#</a> InnerClasses属性</h2> <p>InnerClasses属性用于记录内部类与宿主类之间的关联。如果一个类中定义了内部类，那编译器将会为它以及它所包含的内部类生成InnerClasses属性。结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr> <tr><td>u2</td> <td>number_of_classes</td> <td>1</td></tr> <tr><td>inner_classes_info</td> <td>inner_classes</td> <td>number_of_classes</td></tr></tbody></table> <p>数据项number_of_classes代表需要记录多少个内部类信息，每一个内部类的信息都由一个inner_classes_info表进行描述。inner_classes_info表的结构如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th> <th>含义</th></tr></thead> <tbody><tr><td>u2</td> <td>inner_class_info_index</td> <td>1</td> <td>指向内部类CONSTANT_Class_info类型常量索引</td></tr> <tr><td>u4</td> <td>outer_class_info_index</td> <td>1</td> <td>指向宿主类CONSTANT_Class_info类型常量索引</td></tr> <tr><td>u2</td> <td>inner_name_index</td> <td>1</td> <td>索引值。指向内部类名称，如果为匿名内部类，则该值为0</td></tr> <tr><td>u2</td> <td>inner_name_access_flags</td> <td>1</td> <td>类似于access_flags，是内部类的访问标志</td></tr></tbody></table> <p>实例分析如下：</p> <p><img src="https://blog-1259322452.cos.ap-guangzhou.myqcloud.com/jvm/20200513173220.png" alt=""></p> <h2 id="deprecated及synthetic属性"><a href="#deprecated及synthetic属性" class="header-anchor">#</a> Deprecated及Synthetic属性</h2> <p>Deprecated和Synthetic两个属性都属于标志类型的布尔属性，只存在有和没存的区别，没有属性值的概念。</p> <p>Deprecated属性用于表示某个类、字段或者方法，已经被程序作者定为不再推荐使用，它可以通过在代码中使用@dcprecated注释进行设置。</p> <p>Synthetic属性代表此字段或者方法并不是由Java源码直接产生的，而是由编译器自行添加的。在JDK1.5之后，标识一个类、字段或者方法是编译器自动产生的，也可以设置它们访问标志中的ACC_SYNTHETIC标志位。</p> <p>Deprecated和Synthetic属性的结构非常简单，如下表：</p> <table><thead><tr><th>类型</th> <th>名称</th> <th>数量</th></tr></thead> <tbody><tr><td>u2</td> <td>attribute_name_index</td> <td>1</td></tr> <tr><td>u4</td> <td>attribute_length</td> <td>1</td></tr></tbody></table></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/handsome-hu/handsome-hu.github.io/edit/master/docs/01.Java/03.JVM/03. 类文件结构详解下篇.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=JVM" title="标签">#JVM</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/03/20, 11:17:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/180e36/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">类文件结构详解上篇</div></a> <a href="/pages/95238d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">虚拟机类加载机制</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/180e36/" class="prev">类文件结构详解上篇</a></span> <span class="next"><a href="/pages/95238d/">虚拟机类加载机制</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/2af5d2/"><div>
            MyBatisPlus
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/adff77/"><div>
            MyBatis源码剖析-延迟加载
            <!----></div></a> <span class="date">03-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/abfc63/"><div>
            MyBatis源码剖析-二级缓存
            <!----></div></a> <span class="date">03-20</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:hukai2688@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Handsome-Hu" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/impluvious" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://www.zhihu.com/people/qing-huai-zhu-62" title="知乎" target="_blank" class="iconfont icon-zhihu"></a><a href="https://www.yuque.com/qinghuai-aikxc" title="语雀" target="_blank" class="iconfont icon-yuque"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>HuKai | <a href="http://www.beian.miit.gov.cn">赣ICP备17016768号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><canvas id="vuepress-canvas-ribbon"></canvas><div></div></div></div>
    <script src="/assets/js/app.962f4083.js" defer></script><script src="/assets/js/2.4e5b50fd.js" defer></script><script src="/assets/js/17.953b303f.js" defer></script>
  </body>
</html>
